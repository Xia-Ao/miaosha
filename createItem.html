<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="static/assets/global/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/assets/global/css/components.css">
    <link rel="stylesheet" type="text/css" href="static/assets/admin/pages/css/login.css">

    <script src="./static/assets/global/plugins/jquery-1.11.0.min.js" type="text/javascript"></script>
</head>

<body>
<div class="login">
    <div class="content">
        <h3 class="form-title">创建商品</h3>
        <div class="form-group">
            <label class="control-label">商品名称</label>
            <div>
                <input id="title" type="text" class="form-control" placeholder="商品名称">
            </div>
            <label class="control-label">商品描述</label>
            <div>
                <input id="description" type="text" class="form-control" placeholder="商品描述">
            </div>
            <label class="control-label">商品价格</label>
            <div>
                <input id="price" type="text" class="form-control" placeholder="商品价格">
            </div>
            <label class="control-label">商品库存</label>
            <div>
                <input id="stock" type="text" class="form-control" placeholder="商品库存">
            </div>
            <label class="control-label">商品图片</label>
            <div>
                <input id="imgUrl" type="text" class="form-control" placeholder="商品图片">
            </div>

        </div>
        <div class="form-actions">
            <button id="createBtn" class="btn blue" type="submit">创建商品</button>
        </div>
    </div>
</div>


<script>
    jQuery(document).ready(function () {
        $('#createBtn').on('click', function () {
            let title = $('#title').val();
            let description = $('#description').val();
            let price = $('#price').val();
            let stock = $('#stock').val();
            let imgUrl = $('#imgUrl').val();
            if (!title) {
                alert('商品名称为空，请重新输入！')
            } else if (!description) {
                alert('商品描述为空！')
            } else if (!price) {
                alert('价格不能为空！')
            } else if (!stock) {
                alert('库存不能为空！')
            } else if (!imgUrl) {
                alert('图片地址不能为空！')
            } else {
                $.ajax({
                    type: 'POST',
                    contentType: 'application/x-www-form-urlencoded',
                    url: 'http://localhost:8090/item/create',
                    xhrFields: {withCredentials: true},
                    data: {
                        title: title,
                        description: description,
                        price: price,
                        stock: stock,
                        imgUrl: imgUrl,
                    },
                    success: function (data) {
                        if (data.status === 'success') {
                            alert('创建成功!')
                        } else {
                            alert('创建失败：' + data.data.errMsg);
                        }

                    },
                    error: function (data) {
                        alert('请求出错' + data)
                    }
                })
            }

        })
    })
</script>
</body>

</html>